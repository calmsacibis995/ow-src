
#ifndef lint
static char sccsid[] = "@(#)pageviewui.c 1.26 95/07/13";
#endif

/*
 * Copyright (c) 1986, 1987, 1988 by Sun Microsystems, Inc.
 */

/*
 * pageviewui.c - User interface object initialization functions
 * for page view pop up.
 * This file was generated by `gxv' from `imagetool.G'.
 */

#include <sys/param.h>
#include <xview/xview.h>
#include <xview/cms.h>
#include <xview/panel.h>
#include <xview/scrollbar.h>
#include <xview/svrimage.h>
#include "display.h"
#include "image.h"
#include "imagetool.h" 
#include "state.h"
#include "ui_imagetool.h"

int		choice_width;
int		one_choice_height;
int		choice_rows;
int		one_choice_width;
int		scrollbar_active;
int		left_margin = 25;
static char	last_page [20];
static char	first_page [20];
static Cms      panel_cms;
static int      scrollbar_right;  /* Scrollbar placement */

Xv_opaque      *server_images = NULL;
Pixmap	       *pixmaps = NULL;
int		choices = 0;

Notify_value
pageview_monitor_scroll (client, event, sbar, type)
Notify_client   	 client;
Event           	*event;
Scrollbar       	 sbar;
Notify_event_type        type;
{
    int 	pageview_start_page;
    int 	pageview_end_page;
    int		current_row;
    int 	current_x;
    int		end_width;
    int		loc;

    if (scrollbar_active == FALSE)
       return (notify_next_event_func (client, (Notify_event) event, sbar, 
					type));

    if (pageview->displayed == FALSE) {
       pageview->displayed = TRUE;
       }

    if (event_id (event) == SCROLLBAR_REQUEST) {
       current_row = xv_get (sbar, SCROLLBAR_VIEW_START);
       current_x = 0 - (current_row * one_choice_height);
       pageview_start_page = (current_row * 4) + 1;
       sprintf (first_page, LGET ("Page %d"), pageview_start_page);
       xv_set (pageview->start_page, PANEL_LABEL_STRING, first_page, NULL);
       pageview_end_page = pageview_start_page + 15;
    
       if (pageview_end_page > current_image->pages)
          pageview_end_page = current_image->pages;

       sprintf (last_page, LGET ("Page %d"), pageview_end_page);
       xv_set (pageview->end_page, PANEL_LABEL_STRING, last_page, NULL);
   
       end_width = xv_get (pageview->end_page, XV_WIDTH);
       loc = (pageview_end_page % 4);
       if (loc == 0)
          loc = 4;
       xv_set (pageview->end_page, XV_X, choice_width - 
		(((pageview_end_page > 4 ? 4 : pageview_end_page) - loc) *
                  one_choice_width) - end_width + left_margin,  
		NULL);

       xv_set (pageview->pages, XV_Y, current_x, NULL);
       return NOTIFY_DONE;
       }

    return (notify_next_event_func (client, (Notify_event) event, sbar, type));
}

/*
 * Initialize an instance of object `pageview'.
 */
PageviewObjects *
PageviewObjectsInitialize(ip, owner, pages)
	PageviewObjects	*ip;
	Xv_opaque	 owner;
	int		 pages;
{
	int	tmp_width;
	int 	controls1_width;
	int 	controls2_width;
	int 	controls3_width;
	int	larger_width;
	int	current_x;
        int     vwidth;
   	int	pages_width;
	int	xpos;
 	extern void pageview_pixmaps_create ();

	if (!ip && 
	    !(ip = (PageviewObjects *) calloc(1, sizeof (PageviewObjects))))
		return (PageviewObjects *) NULL;
	ip->width = (int) (ps_display->pagewidth * 6.0);
	ip->height = (int) (ps_display->pageheight * 6.0);
	choices = 0;
	if (!ip->pageview)
		ip->pageview = pageview_pageview_create(ip, owner);
	if (!ip->controls1)
		ip->controls1 = pageview_controls1_create(ip, ip->pageview);
	if (!ip->start_page)
		ip->start_page = pageview_start_page_create(ip, ip->controls1);
	if (!ip->controls2)
		ip->controls2 = pageview_controls2_create(ip, ip->pageview);
	if (!ip->canvas)
		ip->canvas = pageview_canvas_create(ip, ip->pageview);
	if (!ip->vscroll)
		ip->vscroll = pageview_vscroll_create (ip, ip->canvas);
	if (!ip->controls3)
		ip->controls3 = pageview_controls3_create(ip, ip->pageview);
	if (!ip->end_page)
		ip->end_page = pageview_end_page_create(ip, ip->controls3);
	if (!ip->goto_page)
		ip->goto_page = pageview_goto_page_create(ip, ip->controls3);
	if (!ip->apply)
		ip->apply = pageview_apply_create(ip, ip->controls3);
	if (!ip->cancel)
		ip->cancel = pageview_cancel_create(ip, ip->controls3);
        /*pageview_pixmaps_create (pages);*/
	if (!ip->pages)
		ip->pages= pageview_pages_create (ip, ip->controls2, pages); 


 	if (pages < 4)
	   pages_width = one_choice_width * 4;
   	else 
	   pages_width = choice_width;

/*
 * Set the width of the 2nd controls area.
 */

	controls2_width = pages_width + xv_get (ip->canvas, XV_WIDTH) + 
	                  left_margin;

/*
 * Set height/width of controls1 
 */

  	controls1_width = xv_get (ip->start_page, XV_WIDTH) + 
		    	  xv_get (ip->start_page, XV_X);

	larger_width = Max (controls1_width, controls2_width);

/*
 * Get height/width of controls area 3
 */

	controls3_width = xv_get (ip->end_page, XV_WIDTH);
	tmp_width = xv_get (ip->goto_page, XV_WIDTH);
	if (tmp_width > controls3_width)
	   controls3_width = tmp_width;
	tmp_width = xv_get (ip->apply, XV_WIDTH) + 
		    xv_get (ip->cancel, XV_WIDTH) + 40; 
	if (tmp_width > controls3_width)
	   controls3_width = tmp_width;

	larger_width = Max (larger_width, controls3_width);

/*
 * Check width.. if controls3 or controls1 is larger than controls2, then
 * reposition the choice item.
 */

	xv_set (ip->controls1, XV_WIDTH, larger_width, NULL);
	if (prog->sb_right) 
	  xv_set (ip->controls2, 
		  XV_X, 0,
		  XV_WIDTH, larger_width - xv_get (ip->canvas, XV_WIDTH), 
		  NULL);
        else 
  	  xv_set (ip->controls2, 
		  XV_X, xv_get (ip->canvas, XV_WIDTH),
		  XV_WIDTH, larger_width - xv_get (ip->canvas, XV_WIDTH), 
		  NULL);

	xv_set (ip->controls3, XV_WIDTH, larger_width, NULL);
	xv_set (ip->pageview, XV_WIDTH, larger_width, NULL);

	if (larger_width > controls2_width) 
	   xv_set (ip->pages, XV_X, 
			(larger_width - pages_width) / 2,
			      NULL);
	 

/*
 * Set location of go to page text item...
 */
 
        xpos = (xv_get (ip->controls3, XV_WIDTH) -
                xv_get (ip->goto_page, XV_WIDTH)) / 2;

        xv_set (ip->goto_page, XV_X, xpos, NULL);

/*
 * Set location of apply button.
 */

 	xpos = (xv_get (ip->controls3, XV_WIDTH) -
		xv_get (ip->apply, XV_WIDTH) -
		xv_get (ip->cancel, XV_WIDTH) - 20) / 2;

	xv_set (ip->apply, XV_X, xpos, NULL);

/*
 * Set location of cancel button.
 */

	xv_set (ip->cancel, XV_X, xv_get (ip->apply, XV_X) +
				  xv_get (ip->apply, XV_WIDTH) + 20,
			    NULL);

/*
 * Set height of controsl3 area.
 */

	xv_set (ip->controls3, XV_HEIGHT, xv_get (ip->apply, XV_Y) +
					  xv_get (ip->apply, XV_HEIGHT) + 25,
			       PANEL_DEFAULT_ITEM, ip->apply,
			       NULL);
				
/*
 * Set height of pop up...
 */

	xv_set (ip->pageview, XV_HEIGHT,
			xv_get (ip->controls1, XV_HEIGHT) +
			xv_get (ip->controls2, XV_HEIGHT) +
			xv_get (ip->controls3, XV_HEIGHT),
			NULL); 
/*
 * See what the left margin... (depends on where scrollbar is)
 * and reset first page xv-x if necessary.
 */

	if (prog->sb_right == FALSE) {
	   xv_set (ip->start_page, XV_X, left_margin, NULL);
	   current_x = xv_get (ip->end_page, XV_X);
	   xv_set (ip->end_page, XV_X, current_x, NULL);
	   }

	return ip;
}

/*
 * Create object `pageview' in the specified instance.
 */
Xv_opaque
pageview_pageview_create(ip, owner)
	PageviewObjects	*ip;
	Xv_opaque	owner;
{
	Xv_opaque	obj;
	
	obj = xv_create(owner, FRAME_CMD,
		XV_KEY_DATA, INSTANCE, ip,
		XV_LABEL, LGET( "Image Tool:  Page Overview" ),
		XV_WIDTH, 300,
		XV_HEIGHT, 300,
		XV_SHOW, FALSE,
		FRAME_SHOW_FOOTER, FALSE,
		FRAME_SHOW_RESIZE_CORNER, FALSE,
		FRAME_CMD_PUSHPIN_IN, TRUE,
		NULL);
	/*xv_set(xv_get(obj, FRAME_CMD_PANEL), WIN_SHOW, FALSE, NULL); */ 
	return obj;
}

/*
 * Create object `controls1' in the specified instance.
 */
Xv_opaque
pageview_controls1_create(ip, owner)
	PageviewObjects	*ip;
	Xv_opaque	owner;
{
	Xv_opaque	obj;
	
	/*obj = xv_create (owner, PANEL, */
        obj = xv_get( owner, FRAME_CMD_PANEL );
	xv_set( obj, 
		XV_KEY_DATA, INSTANCE, ip,
		XV_X, 0,
		XV_Y, 0,
		WIN_BORDER, FALSE,
                XV_HELP_DATA, "imagetool:PageviewWindow",
		NULL);
	return obj;
}

/*
 * Create object `start_page' in the specified instance.
 */
Xv_opaque
pageview_start_page_create (ip, owner)
	PageviewObjects	*ip;
	Xv_opaque	owner;
{
        Xv_opaque       obj;

        obj = xv_create(owner, PANEL_MESSAGE,
                XV_KEY_DATA, INSTANCE, ip,
                XV_X, left_margin,
                XV_Y, 25,
                PANEL_LABEL_STRING, LGET ("Page 1"),
		PANEL_LABEL_BOLD, FALSE,
                XV_HELP_DATA, "imagetool:PageviewStartPage",
                NULL);
/*
 * Set the height of controls1.
 */
	xv_set (owner, XV_HEIGHT, xv_get (obj, XV_Y) +
				  xv_get (obj, XV_HEIGHT) + 2,
		       NULL);
        return obj;
}

/*
 * Create object `controls2' in the specified instance.
 */
Xv_opaque
pageview_controls2_create(ip, owner)
	PageviewObjects	*ip;
	Xv_opaque	owner;
{
	Xv_opaque	obj;
	
	obj = xv_create( owner, PANEL,
		XV_KEY_DATA, INSTANCE, ip,
		XV_X, 0,
		XV_Y, (int) xv_get (ip->controls1, XV_Y) +
		      (int) xv_get (ip->controls1, XV_HEIGHT),
		WIN_BORDER, FALSE,
                XV_HELP_DATA, "imagetool:PageviewWindow",
		NULL);
	panel_cms = xv_get (obj, WIN_CMS);

	return obj;

}
/*
 * Create object `canvas' in the specified instance.
 */
Xv_opaque
pageview_canvas_create(ip, owner)
	PageviewObjects	*ip;
	Xv_opaque	owner;
{
	Xv_opaque	obj;
	
	obj = xv_create( owner, CANVAS,
		XV_KEY_DATA, INSTANCE, ip,
		XV_Y, (int) xv_get (ip->controls1, XV_Y) +
		      (int) xv_get (ip->controls1, XV_HEIGHT),
		OPENWIN_SHOW_BORDERS, FALSE,
		CANVAS_RETAINED, FALSE,
		CANVAS_AUTO_EXPAND, FALSE,
		CANVAS_AUTO_SHRINK, FALSE,
		CANVAS_FIXED_IMAGE, FALSE,
		CANVAS_AUTO_CLEAR, FALSE,	
		WIN_CMS, panel_cms,
		WIN_FOREGROUND_COLOR, CMS_CONTROL_BG1, 
                XV_HELP_DATA, "imagetool:PageviewWindow",
		NULL);
        return obj;

}

/*
 * Create object `vscroll' in the specified instance.
 */
Xv_opaque
pageview_vscroll_create (ip, owner)
	PageviewObjects	*ip;
	Xv_opaque	owner;
{
	Xv_opaque	obj;
        char           *s;

	obj = xv_create( owner, SCROLLBAR,
		SCROLLBAR_DIRECTION,	SCROLLBAR_VERTICAL,
   		NULL);
/*
 * Set the canvas to be 1 more than 
 * the width of the scrollbar.
 */
	xv_set (ip->canvas, XV_WIDTH, xv_get (obj, XV_WIDTH) + 1, NULL);

	notify_interpose_event_func (xv_get (obj, SCROLLBAR_NOTIFY_CLIENT),
		pageview_monitor_scroll, NOTIFY_SAFE);
  	return (obj);
}

/*
 * Reverse pageview pages, if user selects reverse page order
 * on PostScript pop up.
 */
void
reverse_pageview_pages (ip, number, reverse)
	PageviewObjects	*ip;
	int		 number;
	int		 reverse;
{
    int		i;
    int		old_value;
    extern void	pages_notify_proc ();

    xv_set (ip->pages, XV_SHOW, FALSE, NULL);
    old_value = xv_get (ip->pages, PANEL_VALUE);
    xv_destroy (ip->pages);
    ip->pages = xv_create(ip->controls2, PANEL_CHOICE,
                	XV_KEY_DATA, INSTANCE, ip,
                	XV_X, left_margin,
                	XV_Y, 0,
                	PANEL_CHOICE_NCOLS, 4,
                	PANEL_LAYOUT, PANEL_HORIZONTAL,
                	PANEL_CHOOSE_NONE, FALSE,
			PANEL_NOTIFY_PROC, pages_notify_proc,
                	XV_HELP_DATA, "imagetool:PageviewPages",
			NULL);

    if (reverse == TRUE)
       for (i = 0; i < number; i++)
	   xv_set (ip->pages, PANEL_CHOICE_IMAGE, i, 
				server_images [number - i - 1], 
			      NULL);
    else
       for (i = 0; i < number; i++)
	   xv_set (ip->pages, PANEL_CHOICE_IMAGE, i, server_images [i], 
			      NULL);
   
    if (prog->sb_right) 
      xv_set (ip->pages, XV_X, left_margin, 
			 PANEL_VALUE, old_value,
			 NULL);
    else 
      xv_set (ip->pages,
	      XV_X, left_margin - xv_get (ip->canvas, XV_WIDTH),
	      PANEL_VALUE, old_value,
	      NULL);
}

/*
 * Create pixmaps (server images) for pop up.
 */ 

void
pageview_pixmaps_create (number)
	int		 number;
{
	int	i;

	if (number > choices) {
	   if (server_images != (Xv_opaque *) NULL)
	      server_images = (Xv_opaque *) realloc (server_images, 
					          sizeof (Xv_opaque) * number);
	   else
	      server_images = (Xv_opaque *) malloc (sizeof (Xv_opaque) * number);

	   if (pixmaps != (unsigned long *) NULL)
	      pixmaps = (unsigned long *) realloc (pixmaps,
					       sizeof (unsigned long) * number);
	   else
	      pixmaps = (unsigned long *) malloc (number *
					       	      sizeof (unsigned long));

	   for (i = choices; i < number; i++) {
	       server_images [i] = xv_create (XV_NULL, SERVER_IMAGE,
				SERVER_IMAGE_DEPTH, 1,
				XV_WIDTH,	    
					(int) (ps_display->pagewidth * 6.0),
				XV_HEIGHT,	    
					(int) (ps_display->pageheight * 6.0),
#ifdef __ppc
          /* PPC Compiler bug hack. Delete when fixed. I`ll add bug number
             when I submit the bug. */
				NULL,
#endif
				NULL);
	       pixmaps [i] = xv_get (server_images [i], SERVER_IMAGE_PIXMAP);
	       }

	   XSync (ps_display->xdisplay, 0);
	   choices = number;
	   }
}

/*
 * Create object `pages' in the specified instance.
 */
Xv_opaque
pageview_pages_create (ip, owner, number)
	PageviewObjects	*ip;
	Xv_opaque	 owner;
	int		 number;
{
	Xv_opaque	obj;
	extern void	pages_notify_proc ();
	int		i;
	int		choice_height;
	int		end_width;
	int		start_width;
	int		loc;
	int		xpos;
	int             pages_width;
	int             view_length;
	int             page_length;
	
        if (ip->pages != NULL) {
	   xv_set (ip->pages, XV_SHOW, FALSE, NULL);
	   xv_destroy (ip->pages);
	   }

	obj = xv_create(owner, PANEL_CHOICE,
                XV_KEY_DATA, INSTANCE, ip,
                XV_X, left_margin,
                XV_Y, 0,
                PANEL_CHOICE_NCOLS, 4,
                PANEL_LAYOUT, PANEL_HORIZONTAL,
                PANEL_CHOOSE_NONE, FALSE,
		PANEL_VALUE, 0,
		PANEL_NOTIFY_PROC, pages_notify_proc,
               	XV_HELP_DATA, "imagetool:PageviewPages",
		NULL);

	for (i = 0; i < number; i++)
	    xv_set (obj, PANEL_CHOICE_IMAGE, i, server_images [i], NULL);

	choice_height = xv_get (obj, XV_HEIGHT);

/*
 * Set height of controls2 (choice item) and canvas.
 */

	/*xv_set (ip->vscroll, SCROLLBAR_OBJECT_LENGTH, choice_height,
			     SCROLLBAR_VIEW_START,    0,
			     NULL); */

	if (number > 16) 
	   xv_set (owner, XV_HEIGHT, ((choice_height / ((number + 3) / 4)) * 4) + 1,
			  NULL);
	else {
	   xv_set (owner, XV_HEIGHT, choice_height + 1, NULL);
	 }
	
	xv_set (ip->controls3, XV_Y, xv_get (owner, XV_Y) +
				     xv_get (owner, XV_HEIGHT),
			       NULL);

/*
 * Reset goto page back to 1..
 */

	xv_set (ip->goto_page, PANEL_VALUE, 1, 
			       PANEL_MAX_VALUE, number, 
			       NULL);

/*
 * Set value of first page.
 */

       sprintf (first_page, LGET ("Page 1"));
       xv_set (ip->start_page, PANEL_LABEL_STRING, first_page, NULL);

/*
 * Set value of end page item...
 */
	sprintf (last_page, LGET ("Page %d"), number > 16 ? 16: number);
	xv_set (ip->end_page, PANEL_LABEL_STRING, last_page, NULL);

/*
 * Set location of start page and end page message item
 */


	choice_width = xv_get (obj, XV_WIDTH);
	one_choice_width = choice_width / (number > 4 ? 4 : number); 
	one_choice_width = ip->width + 14;  /* kludge */
 	choice_rows = (number + 3) / 4;
  	one_choice_height = choice_height / choice_rows;
	end_width = xv_get (ip->end_page, XV_WIDTH);
	start_width = xv_get (ip->start_page, XV_WIDTH);
	scrollbar_active = TRUE;
        view_length = choice_rows;
        if (view_length > 4)
          view_length = 4;
        page_length = view_length;
        if (page_length >= 4)
	  page_length = 3;
        else
          page_length = view_length;

 	if (number < 4)
	   pages_width = one_choice_width * 4;
   	else 
	   pages_width = xv_get (obj, XV_WIDTH);

        if (prog->sb_right) {
	  xv_set (ip->canvas,
		  XV_X, left_margin + pages_width,
		  XV_HEIGHT, xv_get (owner, XV_HEIGHT),
		  CANVAS_HEIGHT, choice_rows * one_choice_height,
		  NULL);
	  xv_set (obj, XV_X, left_margin, NULL);
	}
        else {
	  xv_set (ip->canvas, 
		  XV_X, 0,
		  XV_HEIGHT, xv_get (owner, XV_HEIGHT),
		  CANVAS_HEIGHT, choice_rows * one_choice_height,
		  NULL);
	  xv_set (obj,
		  XV_X, left_margin - xv_get (ip->canvas, XV_WIDTH),
		  NULL);
	}

	xv_set (ip->vscroll, SCROLLBAR_PIXELS_PER_UNIT, one_choice_height,
			     SCROLLBAR_OBJECT_LENGTH,  choice_rows,
			     SCROLLBAR_VIEW_START,     0,
			     SCROLLBAR_VIEW_LENGTH,    view_length,
			     SCROLLBAR_PAGE_LENGTH,    page_length,
			     NULL); 


	if (number > 16) 
	   xv_set (ip->end_page, XV_X, choice_width - end_width + left_margin, 
				 NULL);
	else {
	   scrollbar_active = FALSE;
	   loc = (number % 4);
	   if (loc == 0)
	      loc = 4;
	   xv_set (ip->end_page, XV_X, choice_width - 
				    (((number > 4 ? 4 : number) - loc) *
                                       one_choice_width) - end_width + 
				       left_margin,  
			         NULL);
	   }

	xpos = xv_get (ip->end_page, XV_X);

	if (xpos < 0)
	   xv_set (ip->end_page, XV_X, 0, NULL);

/*
	if ((xpos + end_width) > (xv_get (ip->controls2, XV_WIDTH) - 
				  xv_get (ip->vscroll, XV_WIDTH)))
	   xv_set (ip->end_page, XV_X, xv_get (ip->controls2, XV_WIDTH) -
				       xv_get (ip->vscroll, XV_WIDTH) -
				       end_width,
				 NULL);
*/

/*
 * Set height of pop up...
 */

	xv_set (ip->pageview, XV_HEIGHT,
			xv_get (ip->controls1, XV_HEIGHT) +
			xv_get (ip->controls2, XV_HEIGHT) +
			xv_get (ip->controls3, XV_HEIGHT),
			NULL); 

	return obj;
}

/*
 * Create object `controls3' in the specified instance.
 */
Xv_opaque
pageview_controls3_create (ip, owner)
	PageviewObjects	*ip;
	Xv_opaque	owner;
{
        Xv_opaque       obj;
         
        obj = xv_create(owner, PANEL,
                XV_KEY_DATA, INSTANCE, ip,
                XV_X, 0,
                XV_Y, (int)xv_get(ip->controls2, XV_Y) +
                      (int)xv_get(ip->controls2, XV_HEIGHT),
		XV_HEIGHT, 300,
                WIN_BORDER, FALSE,
               	XV_HELP_DATA, "imagetool:PageviewWindow",
                NULL);
        return obj;
}
 
/*
 * Create object `end_page' in the specified instance.
 */                      
Xv_opaque
pageview_end_page_create (ip, owner)
	PageviewObjects	*ip;
	Xv_opaque	owner;
{
        Xv_opaque       obj;

        obj = xv_create(owner, PANEL_MESSAGE,
                XV_KEY_DATA, INSTANCE, ip,
                XV_X, 200,
                XV_Y, 2,
                PANEL_LABEL_STRING, LGET ("Page 16"),
		PANEL_LABEL_BOLD, FALSE,
               	XV_HELP_DATA, "imagetool:PageviewEndPage",
                NULL);
        return obj;
}
 
/*
 * Create object `goto_page' in the specified instance.
 */
Xv_opaque
pageview_goto_page_create (ip, owner)
	PageviewObjects	*ip;
	Xv_opaque	owner;
{
        Xv_opaque       obj;
	extern void	goto_notify_proc ();

        obj = xv_create(owner, PANEL_NUMERIC_TEXT,
                XV_KEY_DATA, INSTANCE, ip,
                XV_X, 60,
                XV_Y, xv_get (ip->end_page, XV_Y) +
		      xv_get (ip->end_page, XV_HEIGHT) + 30,
                PANEL_VALUE_DISPLAY_LENGTH, 3,
                PANEL_VALUE_STORED_LENGTH, 80,
                PANEL_LABEL_STRING, LGET ("Go To Page:"),
                PANEL_LAYOUT, PANEL_HORIZONTAL,
                PANEL_MAX_VALUE, 16,
                PANEL_MIN_VALUE, 1,
                PANEL_VALUE, 1,
                PANEL_READ_ONLY, FALSE,
		PANEL_NOTIFY_PROC, goto_notify_proc,
               	XV_HELP_DATA, "imagetool:PageviewGoToPage",
                NULL);
        return obj;
}

/*
 * Create object `apply' in the specified instance.
 */
Xv_opaque
pageview_apply_create (ip, owner)
	PageviewObjects	*ip;
	Xv_opaque	owner;
{
        Xv_opaque       obj;
	extern void	pageview_notify_proc ();

        obj = xv_create(owner, PANEL_BUTTON,
                XV_KEY_DATA, INSTANCE, ip,
                XV_X, 112,
                XV_Y, xv_get (ip->goto_page, XV_Y) +
		      xv_get (ip->goto_page, XV_HEIGHT) + 40,
                PANEL_LABEL_STRING, LGET ("Display Page"),
		PANEL_NOTIFY_PROC, pageview_notify_proc,
               	XV_HELP_DATA, "imagetool:PageviewDisplayPage",
                NULL);
        return obj;
}

/*
 * Create object `cancel' in the specified instance.
 */
Xv_opaque
pageview_cancel_create (ip, owner)
	PageviewObjects	*ip;
	Xv_opaque	owner;
{
        Xv_opaque       obj;
	extern void	cancel_pageview ();

        obj = xv_create(owner, PANEL_BUTTON,
                XV_KEY_DATA, INSTANCE, ip,
                XV_X, 112,
                XV_Y, xv_get (ip->goto_page, XV_Y) +
		      xv_get (ip->goto_page, XV_HEIGHT) + 40,
                PANEL_LABEL_STRING, LGET ("Cancel"),
		PANEL_NOTIFY_PROC, cancel_pageview, 
               	XV_HELP_DATA, "imagetool:PageviewCancel",
                NULL);
        return obj;
}

