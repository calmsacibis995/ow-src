#ifndef _QUERYPROPS_H
#define _QUERYPROPS_H

#ident "@(#)queryprops.h	1.36 96/11/15 Copyright 1990-1992 Sun Microsystems, Inc."

#include "navigator.h"
#include "xview.h"


// Forward class references.
//
class	ABGROUP;
class	NOTIFY;
class	QUERY;
class	WINLIST;


// Events generated by QUERYPROPS.
//
typedef enum {
	// User clicks on "Apply" button...
	QUERYPROPS_APPLY_EVENT		= 1500,

	// User clicks on "Reset" button...
	QUERYPROPS_RESET_EVENT		= 1501,

	// User selects "Sort By" toggle...
	QUERYPROPS_SORT_TOGGLE_EVENT	= 1502,

	// User selects "Titles Only" toggle...
	QUERYPROPS_TITLES_TOGGLE_EVENT	= 1503,

	// User adjusts "Max Documents" setting...
	QUERYPROPS_MAX_HITS_EVENT	= 1504

} QUERYPROPS_EVENT;


class QUERYPROPS {

    private:

	ABGROUP		*abgroup;
	QUERY 		*query;


	// Event handler and accompanying callback argument for
	// QUERYPROPS events.
	//
	EVENT_HANDLER	event_handler;
	caddr_t		event_client_data;

	Frame		frame;
	Panel		panel;

	Xv_opaque	apply_button;
	Xv_opaque	reset_button;
	Xv_opaque	titles_toggle;
	Xv_opaque	sort_toggle;
	Xv_opaque	max_hits_widget;
	Xv_opaque	per_ab_widget;

	// Status & error message handler.
	//
	NOTIFY		*notify;

	// Current state of this object.
	//
	OBJECT_STATE	objstate;

	// Layout panel widgets.
	//
	void		PanelLayout();


    public:

	QUERYPROPS(Xv_opaque parent_frame, QUERY *query, ABGROUP *abgroup);
	~QUERYPROPS();

	void	Show();
	void	Update();
	STATUS 	ApplyProps();
	void 	ResetProps();


	// Allow others to be notified of QUERYPROPS events.
	// i.e., when user pushes "Apply" button.
	// When we get a QUERYPROPS event,
	// we call 'proc', passing it 'arg' as it's sole argument.
	//
	void	SetEventHandler(EVENT_HANDLER proc, caddr_t arg)
			{ event_handler = proc; event_client_data = arg; }

	// Event dispatcher and handler for query props events.
	// The dispatcher is a static method that simply passes
	// the event on to the per-object event handler.
	//
	static void	DispatchEvent(	int	event,
					caddr_t	event_obj,
					caddr_t	client_data);
	void		EventHandler(	int	event,
					caddr_t	event_obj);
};

#endif _QUERYPROPS_H
